(function(t){function e(e){for(var o,r,c=e[0],i=e[1],s=e[2],d=0,l=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);f&&f(e);while(l.length)l.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(u.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a={app:0},u=[];function c(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-0fbc7efa":"02bb5959","chunk-6f471c1f":"fe81d511","chunk-aa422e36":"e63aca72","chunk-274b2220":"64812fb3","chunk-ae23a152":"96b6b856"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n={"chunk-6f471c1f":1,"chunk-aa422e36":1,"chunk-274b2220":1,"chunk-ae23a152":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-0fbc7efa":"31d6cfe0","chunk-6f471c1f":"333a8c46","chunk-aa422e36":"35abfeda","chunk-274b2220":"a5ea1c22","chunk-ae23a152":"b1021c16"}[t]+".css",a=i.p+o,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===o||d===a))return e()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){s=l[c],d=s.getAttribute("data-href");if(d===o||d===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,u=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[t],f.parentNode.removeChild(f),n(u)},f.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var u=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(t);var l=new Error;s=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[t]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/lime-notes-website/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var f=d;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"135c":function(t,e,n){"use strict";n("d3b7"),n("4e82"),n("159b"),n("ac1f"),n("5319");var o=n("b775"),r=n("2798"),a={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"};e["a"]={getAll:function(){return new Promise((function(t,e){Object(o["a"])(a.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt<e.createdAt?1:-1})),e.data.forEach((function(t){t.createdAtFriendly=Object(r["a"])(t.createdAt),t.updatedAtFriendly=Object(r["a"])(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},updateNotebook:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},n=e.title,r=void 0===n?"":n;return Object(o["a"])(a.UPDATE.replace(":id",t),"PATCH",{title:r})},deleteNotebook:function(t){return Object(o["a"])(a.DELETE.replace(":id",t),"DELETE")},addNotebook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,n=void 0===e?"":e;return new Promise((function(t,e){Object(o["a"])(a.ADD,"POST",{title:n}).then((function(e){e.data.createdAtFriendly=Object(r["a"])(e.data.createdAt),e.data.updatedAtFriendly=Object(r["a"])(e.data.updatedAt),t(e)})).catch((function(t){e(t)}))}))}}},"141b":function(t,e){t.exports={baseURL:"//note-server.hunger-valley.com"}},2798:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("53ca");function r(t){var e="object"===Object(o["a"])(t)?t:new Date(t),n=e.getTime(),r=Date.now(),a=r-n,u="";switch(!0){case a<6e4:u="刚刚";break;case a<36e5:u=Math.floor(a/6e4)+"分钟前";break;case a<864e5:u=Math.floor(a/36e5)+"小时前";break;default:u=Math.floor(a/864e5)+"天前"}return u}},"56d7":function(t,e,n){"use strict";n.r(e),n.d(e,"eventBus",(function(){return ut}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Sidebar"),n("router-view")],1)},a=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"sidebar"}},[n("Avatar"),n("div",{staticClass:"icons"},[n("router-link",{attrs:{to:"/note",title:"笔记"}},[n("i",{staticClass:"iconfont icon-note"})]),n("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[n("i",{staticClass:"iconfont icon-notebook"})]),n("router-link",{attrs:{to:"/trash",title:"回收站"}},[n("i",{staticClass:"iconfont icon-trash"})])],1),n("div",{staticClass:"logout",on:{click:t.onLogout}},[n("i",{staticClass:"iconfont icon-logout"})])],1)},c=[],i=n("5530"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},d=[],l=n("2f62"),f={name:"Avatar",data:function(){return{}},created:function(){this.checkLogin()},methods:Object(i["a"])({},Object(l["b"])("user",["checkLogin"])),computed:Object(i["a"])({},Object(l["c"])("user",["slug","username"]))},b=f,h=(n("977f"),n("2877")),p=Object(h["a"])(b,s,d,!1,null,"51edd048",null),m=p.exports,g={name:"Sidebar.vue",components:{Avatar:m},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("user",["logout"])),{},{onLogout:function(){this.logout({path:"/login"})}})},k=g,v=(n("9c2a"),Object(h["a"])(k,u,c,!1,null,"3b98c456",null)),N=v.exports,T={name:"App",components:{Sidebar:N}},E=T,A=(n("034f"),Object(h["a"])(E,r,a,!1,null,null,null)),I=A.exports,O=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f"));o["a"].use(O["a"]);var j=[{path:"/login",name:"Login",component:function(){return n.e("chunk-274b2220").then(n.bind(null,"a55b"))}},{path:"/",name:"NotebookList",alias:"/notebooks",component:function(){return n.e("chunk-ae23a152").then(n.bind(null,"976e"))}},{path:"/note",name:"NoteDetail",component:function(){return Promise.all([n.e("chunk-0fbc7efa"),n.e("chunk-aa422e36")]).then(n.bind(null,"65b4"))}},{path:"/trash",name:"TashDetail",component:function(){return Promise.all([n.e("chunk-0fbc7efa"),n.e("chunk-6f471c1f")]).then(n.bind(null,"68b0"))}}],y=new O["a"]({routes:j}),w=y,S=n("aa30"),P=(n("7db0"),n("25f0"),n("4de4"),n("ac1f"),n("5319"),n("4e82"),n("d81d"),n("b775")),L=n("2798"),D={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"},C={getAll:function(t){var e=t.notebookId;return new Promise((function(t,n){Object(P["a"])(D.GET.replace(":notebookId",e)).then((function(e){e.data=e.data.map((function(t){return t.createdAtFriendly=Object(L["a"])(t.createdAt),t.updatedAtFriendly=Object(L["a"])(t.updatedAt),t})).sort((function(t,e){return t.updatedAt<e.updatedAt?1:-1})),t(e)})).catch((function(t){n(t)}))}))},updateNote:function(t,e){var n=t.noteId,o=e.title,r=e.content;return Object(P["a"])(D.UPDATE.replace(":noteId",n),"PATCH",{title:o,content:r})},deleteNote:function(t){var e=t.noteId;return Object(P["a"])(D.DELETE.replace(":noteId",e),"DELETE")},addNote:function(t){var e=t.notebookId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},o=n.title,r=void 0===o?"":o,a=n.content,u=void 0===a?"":a;return new Promise((function(t,n){Object(P["a"])(D.ADD.replace(":notebookId",e),"POST",{title:r,content:u}).then((function(e){e.data.createdAtFriendly=Object(L["a"])(e.data.createdAt),e.data.updatedAtFriendly=Object(L["a"])(e.data.updatedAt),t(e)})).catch((function(t){n(t)}))}))}};o["a"].component("Message",S["a"]);var _={notes:null,curNoteId:null},G={notes:function(t){return t.notes||[]},curNote:function(t){return Array.isArray(t.notes)?t.curNoteId?t.notes.find((function(e){return e.id.toString()===t.curNoteId.toString()}))||{title:"",content:""}:t.notes[0]||{title:"",content:""}:{title:"",content:""}}},U={setNote:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var n=t.notes.find((function(t){return t.id.toString()===e.noteId.toString()}))||{};n.title=e.title,n.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id.toString()!==e.noteId.toString()}))},setCurNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{curNoteId:""},n=e.curNoteId,o=void 0===n?"":n;t.curNoteId=o}},F={getNotes:function(t,e){var n=t.commit,o=e.notebookId;return C.getAll({notebookId:o}).then((function(t){n("setNote",{notes:t.data})}))},addNote:function(t,e){var n=t.commit,o=e.notebookId,r=e.title,a=e.content;return C.addNote({notebookId:o},{title:r,content:a}).then((function(t){n("addNote",{note:t.data})}))},updateNote:function(t,e){var n=t.commit,o=e.noteId,r=e.title,a=e.content;return C.updateNote({noteId:o},{title:r,content:a}).then((function(){n("updateNote",{noteId:o,title:r,content:a})}))},deleteNote:function(t,e){var n=t.commit,o=e.noteId;return C.deleteNote({noteId:o}).then((function(t){n("deleteNote",{noteId:o}),S["a"].success(t.msg)}))}},x={namespaced:!0,state:_,getters:G,mutations:U,actions:F},B=n("135c");o["a"].component("Message",S["a"]);var M={notebooks:null,curBookId:null},R={notebooks:function(t){return t.notebooks||[]},curBook:function(t){return Array.isArray(t.notebooks)?t.curBookId?t.notebooks.find((function(e){return e.id.toString()===t.curBookId.toString()}))||{}:t.notebooks[0]||{}:{}}},H={setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){var n=t.notebooks.find((function(t){return t.id.toString()===e.notebookId}))||{};n.title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter((function(t){return t.id.toString()!==e.notebookId}))},setCurBook:function(t,e){t.curBookId=e.curBookId}},$={getNotebooks:function(t){var e=t.commit,n=t.state;return null!==n.notebooks?Promise.resolve():B["a"].getAll().then((function(t){e("setNotebooks",{notebooks:t.data})}))},addNotebook:function(t,e){var n=t.commit;return B["a"].addNotebook({title:e.title}).then((function(t){n("addNotebook",{notebook:t.data}),S["a"].success(t.msg)}))},updateNotebook:function(t,e){var n=t.commit;return B["a"].updateNotebook(e.notebookId,{title:e.title}).then((function(t){n("updateNotebook",{notebook:t.data}),S["a"].success(t.msg)}))},deleteNotebook:function(t,e){var n=t.commit;return B["a"].deleteNotebook(e.notebookId).then((function(t){n("deleteNotebook",{notebook:t.data}),S["a"].success(t.msg)}))}},q={namespaced:!0,state:M,getters:R,mutations:H,actions:$},J={REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm",GET:"/notes/trash"},V={getAll:function(){return new Promise((function(t,e){Object(P["a"])(J.GET).then((function(e){e.data=e.data.map((function(t){return t.createdAtFriendly=Object(L["a"])(t.createdAt),t.updatedAtFriendly=Object(L["a"])(t.updatedAt),t})).sort((function(t,e){return t.updatedAt<e.updatedAt?1:-1})),t(e)})).catch((function(t){e(t)}))}))},revertNote:function(t){return Object(P["a"])(J.REVERT.replace(":noteId",t),"PATCH")},deleteNote:function(t){return Object(P["a"])(J.DELETE.replace(":noteId",t),"DELETE")}},K={trashNotes:null,curTrashNoteId:null},z={trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t){return Array.isArray(t.trashNotes)?t.curTrashNoteId?t.trashNotes.find((function(e){return e.id.toString()===t.curTrashNoteId.toString()}))||{}:t.trashNotes[0]||{}:{}},belongTo:function(t,e,n,o){var r=o["notebook/notebooks"].find((function(t){return t.id===e.curTrashNote.notebookId}))||{};return r.title||""}},Q={setTrashNotes:function(t,e){t.trashNotes=e},addTrashNote:function(t,e){t.trashNotes.unshift(e.note)},updateTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter((function(t){return t.id.toString()!==e.toString()}))},setCurTrashNoteId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.curTrashNoteId=e}},W={getTrashNotes:function(t){var e=t.commit;return V.getAll().then((function(t){e("setTrashNotes",t.data)}))},revertTrashNote:function(t,e){var n=t.commit,o=e.noteId;return V.revertNote(o).then((function(){n("updateTrashNote",o)}))},deleteTrashNote:function(t,e){var n=t.commit,o=e.noteId;return V.deleteNote(o).then((function(){n("updateTrashNote",o)}))}},X={namespaced:!0,state:K,getters:z,mutations:Q,actions:W},Y={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"},Z={register:function(t){var e=t.username,n=t.password;return Object(P["a"])(Y.REGISTER,"POST",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return Object(P["a"])(Y.LOGIN,"POST",{username:e,password:n})},logout:function(){return Object(P["a"])(Y.LOGOUT)},getInfo:function(){return Object(P["a"])(Y.GET_INFO)}};o["a"].component("Message",S["a"]);var tt={user:null},et={username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username.charAt(0)}},nt={setUser:function(t,e){t.user=e.user}},ot={login:function(t,e){var n=t.commit,o=e.username,r=e.password;return Z.login({username:o,password:r}).then((function(t){n("setUser",{user:t.data})}))},register:function(t,e){var n=t.commit,o=e.username,r=e.password;return Z.register({username:o,password:r}).then((function(t){n("setUser",{user:t.data})}))},checkLogin:function(t,e){var n=t.commit,o=t.state;return null!==o.user?Promise.resolve():Z.getInfo().then((function(t){t.isLogin?n("setUser",{user:t.data}):w.push(e)}))},logout:function(t,e){var n=t.commit;return Z.logout().then((function(){n("setUser",{user:null}),S["a"].success("注销成功"),w.push(e)}))}},rt={namespaced:!0,state:tt,getters:et,mutations:nt,actions:ot};o["a"].use(l["a"]);var at=new l["a"].Store({modules:{note:x,notebook:q,trash:X,user:rt}}),ut=(n("f8ce"),n("f6e1"),new o["a"]);o["a"].config.productionTip=!1,new o["a"]({router:w,store:at,render:function(t){return t(I)}}).$mount("#app")},"85ec":function(t,e,n){},"977f":function(t,e,n){"use strict";n("a82c")},"9c2a":function(t,e,n){"use strict";n("d11b")},a82c:function(t,e,n){},b775:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("aa30"),r=(n("d3b7"),n("bc3a")),a=n.n(r),u=n("141b"),c=n.n(u),i=n("2b0e");function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,u){var c={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?c.params=n:c.data=n,a()(c).then((function(t){200===t.status?r(t.data):(console.error(t.data.msg),o["a"].error(t.data.msg),u(t.data))})).catch((function(){console.error({msg:"网络异常"}),u({msg:"网络异常"})}))}))}i["a"].component("Message",o["a"]),a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.a.defaults.baseURL=c.a.baseURL,a.a.defaults.withCredentials=!0},d11b:function(t,e,n){},f6e1:function(t,e,n){}});
//# sourceMappingURL=app.e31b05dc.js.map